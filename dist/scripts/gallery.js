!function(n){n.fn.vitGallery=function(e){function l(){A=S.find("."+q.controlsClass),y=n(".prev"),C=n(".next"),v=n(".gallery__controls__item"),w=n(".gallery__inner"),b=w.find(".gallery__img-block.current"),x=b.index()}function i(){b=w.find(".gallery__img-block.current"),x=b.index()}function t(){P.each(function(){n(this).find("span").addClass("gallery__img-block__description"),n(this).find("img").addClass("gallery__img-block__img")})}function a(){P.wrapAll('<div class="'+B+'"></div>')}function r(){var e=0;return q.imgPadding&&0!=q.imgPadding&&(e=(P.length-1)*q.imgPadding),P.each(function(){e+=n(this).outerWidth()}),e}function s(){var e=n("."+B);e.css("width",r())}function c(){P.css("width",S.width())}function o(){var e=[];P.each(function(){var l=n(this).find(".gallery__img-block__img").height();e.push(l)}),S.css("height",Math.max.apply(null,e))}function d(){if(q.controls){A=S.find("."+q.controlsClass);for(var e='<span class="prev"></span>',l='<span class="next"></span>',i='<li class="gallery__controls__item"></li>',t=0;P.length>t;t++)var a=A.append(i);n(".gallery__controls__item").each(function(e){n(this).addClass("item_"+e)}),A.append(a);var r=n(a).find("li").wrapAll('<ul class="gallery__controls__ul"></ul>');n(r).parent().before(e).after(l)}}function _(){P.each(function(e){0!=e&&n(this).css("display","inline-block")})}function u(){b.is(":last-child")||(w.animate({left:k-P.width()},q.animateSpeed),k-=P.width(),b.removeClass("current"),b.next().addClass("current"),n(".gallery__controls__item:eq("+x+")").removeClass("current"),x++,n(".gallery__controls__item:eq("+x+")").addClass("current"),i())}function f(){b.is(":first-child")||(w.animate({left:k+P.width()},q.animateSpeed),console.log(k),k+=P.width(),b.removeClass("current"),b.prev().addClass("current"),n(".gallery__controls__item:eq("+x+")").removeClass("current"),x--,n(".gallery__controls__item:eq("+x+")").addClass("current"),i())}function g(n){var e=n.index();console.log("на что нажали ",e),console.log("какой был ",x),console.log(b),console.log(k),console.log(),x<e?(w.animate({left:k-P.width()*(e-x)},q.animateSpeed),k-=P.width()*(e-x)):(console.log("("+P.width()+"*("+e+"+"+x+") ) + "+k),w.animate({left:-(P.width()*(e+x)+k)},q.animateSpeed),k=-(P.width()*(e+x)+k)),w.find(".current").removeClass("current"),P.eq(e).addClass("current"),A.find(".current").removeClass("current"),v.eq(e).addClass("current"),i()}function m(){k=parseInt(w.css("left")),x=b.index(),y.on("click",function(){b=w.find(".gallery__img-block.current"),f()}),C.on("click",function(){b=w.find(".gallery__img-block.current"),u()}),v.on("click",function(){g(n(this))})}function h(){var n=0;w.find(".current")>0?(n=w.find(".current").index(),v.eq(n).addClass("current"),w.css("left",-(n*P.width()))):(P.first().addClass("current"),v.first().addClass("current")),l()}function p(){t(),a(),o(),c(),s(),_(),d(),l(),h(),m()}var y,C,v,w,k,b,x,q=n.extend({debag:!1,buttons:!0,imgBlockClass:"gallery__img-block",controls:!0,controlsClass:"gallery__controls",animateSpeed:1e3,imgPadding:15,autoplay:!1,autoplayDelay:500},e),S=n(this),P=S.find("."+q.imgBlockClass),A=S.find("."+q.controlsClass),B="gallery__inner";p()}}(jQuery);